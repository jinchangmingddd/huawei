"use strict";$(function(){var t=JSON.parse(window.localStorage.getItem("cart"))||[];if(console.log(t),!t.length)return $("on").addClass("hide"),void $("off").removeClass("hide");function o(){var n=t.every(function(n){return"1"==n.is_select}),s=0;t.forEach(function(n){"1"==n.is_select&&(n.cart_number,s+=n.cart_number*n.goods_price)});var a='\n        <div class="shang">\n                <p class="gwcleft">\n                <input class="qx" type="checkbox" '.concat(n?"checked":"",'>\n                <span>全选</span>\n                <span class="sp">商品</span>\n                </p>\n                <span class="gwcright">\n                <span class="span1">单价</span>\n                <span class="span2">数量</span>\n                <span class="span3">小计</span>\n                <span class="span4">操作</span>\n                </p>\n            </div>    \n                <div class="xia">\n                    <ul class="gwcul">\n        ');t.forEach(function(n){a+='\n            <li>\n            <input class="ip1" type="checkbox" data-id='.concat(n.goods_id," ").concat("0"==n.is_select?"":"checked",'>\n            <img src="').concat(n.goods_small_logo,'" alt="" style="width: 100px; height: 100px; margin: 0px 20px;">\n            <div class="gwcInfo mte">\n                ').concat(n.goods_name,'\n                <p style="width: 64px; height: 20px; padding: 2px 5px; border: 1px solid red; color: red;">分期免息</p>\n            </div>\n            \n            <div class="gwcprice">\n              <span><span>￥</span>').concat(n.goods_price,'</span>\n            </div>\n\n            <div class="num">\n              <button class="subNum" data-id=').concat(n.goods_id,'>-</button>\n              <input type="text" value="').concat(n.cart_number,'" class="inp" />\n              <button class="addNum" data-id=').concat(n.goods_id,'>+</button>\n            </div>\n\n            <div class="totle">\n              <span><span>￥</span>').concat((n.goods_price*n.cart_number).toFixed(2),'</span>\n            </div>\n\n            <div class="del">\n              <span  data-id=').concat(n.goods_id,">删除</span>\n            </div>\n          </li>\n            ")}),a+='\n    </ul>\n    </div>\n    <div class="wei">\n      <div class="null delgwc">清空购物车</div>\n      <div class="continue"><a href="../pages/index.html" style="color: white">继续购物</a></div>\n      <p class="zj">总计:&ensp;&ensp;<span>￥'.concat(s.toFixed(2),'</span></p>\n      <p class="ljjs"><a href="../pages/pay.html" style="color: white">立即付款</a></p>\n    </div>\n    '),$(".on").html(a)}$(".off").addClass("hide"),$(".on").removeClass("hide"),o(),$(".on").on("click",".ip1",function(){var s=$(this).data("id"),n=this.checked;t.filter(function(n){return n.goods_id==s})[0].is_select=n?"1":"0",o(),window.localStorage.setItem("cart",JSON.stringify(t))}),$(".on").on("click",".qx",function(){var n=this.checked;if(console.log(n),n){for(var s=0;s<t.length;s++)t[s].is_select="1";o(),window.localStorage.setItem("cart",JSON.stringify(t))}else{for(var a=0;a<t.length;a++)t[a].is_select="0";o(),window.localStorage.setItem("cart",JSON.stringify(t))}}),$(".on").on("click",".addNum",function(){var s=$(this).data("id"),n=t.filter(function(n){return n.goods_id==s})[0];n.cart_number=+n.cart_number+1,o(),window.localStorage.setItem("cart",JSON.stringify(t))}),$(".on").on("click",".subNum",function(){var s=$(this).data("id"),n=t.filter(function(n){return n.goods_id==s})[0];"1"!=n.cart_number&&(n.cart_number=+n.cart_number-1,o(),window.localStorage.setItem("cart",JSON.stringify(t)))}),$(".on").on("click",".del span",function(){console.log(this);var n=$(this).data("id");console.log(n);for(var s=0;s<t.length;s++)if(console.log(t[s].goods_id),t[s].goods_id==n){t.splice(s,1);break}if(o(),window.localStorage.setItem("cart",JSON.stringify(t)),!t.length)return window.location.reload()}),$(".on").on("click",".delgwc",function(){if(t.length=[],o(),window.localStorage.setItem("cart",JSON.stringify(t)),!t.length)return window.location.reload()})});